# L4. Describing Data

## ä»Šå¤©è¦è«‡

{% hint style="success" %}
4.1 å–®è®Šæ•¸è³‡æ–™

4.2 é›™è®Šæ•¸è³‡æ–™

4.3 Programming

4.4 å¯¦ä¾‹åˆ†æ
{% endhint %}

## 4.1 å–®è®Šæ•¸è³‡æ–™

#### å¤§å­¸ç”Ÿèµ·åºŠæ™‚é–“

* è’é›†å…©ç­åŒå­¸æ¯äººèµ·åºŠæ™‚é–“çš„è³‡æ–™ï¼Œè¼¸å…¥Rä¸¦åˆ†åˆ¥å‘½åç‚ºdata1èˆ‡data2ï¼Œç„¶å¾Œç•«å‡ºå…©ç­çš„è³‡æ–™åˆ†ä½ˆåœ–histogramã€‚

`data1<-read.csv("D://data/ç”²ç­å°è€ƒç´€éŒ„.csv")` 

`data2<-read.csv("D://data/ä¹™ç­å°è€ƒç´€éŒ„.csv")` \#ä¸åŒç‰©ä»¶å¯å­˜å…¥ä¸åŒè³‡æ–™ 

`Wake_Time_A<-data1$èµ·åºŠæ™‚é–“` \#é€™è£¡ä¸ç”¨attachå› ç‚ºåŸå§‹è³‡æ–™ä¸­å…©ç­è®Šæ•¸åç¨±ç›¸åŒ 

`Wake_Time_C<-data2$èµ·åºŠæ™‚é–“` 

`par(mfrow=c(1,2))` 

`hist(Wake_Time_A,col="tan",xlab="Wake Up Time", xlim=c(5,12))` 

`hist(Wake_Time_C,col="tan",xlab="Wake Up Time", xlim=c(5,12))` 

\#ä¸Šè¿°xlimæ˜¯ç”¨ä¾†æ§åˆ¶xè»¸çš„å‘ˆç¾ç¯„åœï¼Œæˆ‘å€‘å°‡å…©åœ–è¨­æˆç›¸åŒçš„xlimä»¥æ–¹ä¾¿æ¯”è¼ƒ 

{% file src=".gitbook/assets/jia-ban-xiao-kao-ji-lu-.csv" %}

{% file src=".gitbook/assets/jia-ban-xiao-kao-ji-lu-.txt" caption="ç”²ç­å°è€ƒç´€éŒ„.txt" %}

{% file src=".gitbook/assets/yi-ban-xiao-kao-ji-lu-.csv" caption="ä¹™ç­å°è€ƒç´€éŒ„.csv" %}

{% file src=".gitbook/assets/yi-ban-xiao-kao-ji-lu-.txt" caption="ä¹™ç­å°è€ƒç´€éŒ„.txt" %}

### 4.1.1 å…©ç­èµ·åºŠæ™‚é–“æœ‰å·®ç•°å—ï¼Ÿ

![](.gitbook/assets/jie-tu-20210222-13.23.15.png)

* çœ‹èµ·ä¾†å¥½åƒAç­æ¯”è¼ƒæ—©èµ·ï¼Œä½†èƒ½å¦æœ‰é€²ä¸€æ­¥çš„ç²¾ç¢ºæè¿°å‘¢ï¼Ÿ

### 4.1.2 å¹³å‡å€¼

* ç•¶è³‡æ–™ç‚ºé‡åŒ–è®Šæ•¸\(quantitative variable\)æ™‚ï¼Œæˆ‘å€‘å¯ä»¥è¨ˆç®—å…¶å¹³å‡å€¼\(average\)ï¼Œç”¨ä¾†è¡¡é‡è³‡æ–™ä¸­å¿ƒé»\(é‡å¿ƒ\)ã€‚

{% hint style="info" %}
è‹¥æœ‰ä¸€ä¸²æ•¸åˆ— $$x_1, x_2, ..., x_N$$ï¼Œå…¶å¹³å‡å€¼ï¼ˆä¸€èˆ¬ç°¡å–®å¯«æˆ$$\bar{x}$$ï¼‰ç‚ºæ•¸åˆ—ç›¸åŠ å¾Œé™¤ä»¥æ•¸åˆ—å€‹æ•¸ï¼Œäº¦å³ï¼š

### $$\bar{x} = {\frac{1}{N}}\sum_{i=1}^N x_i={({X_1+X_2+...+X_N}) \over {N}}$$ 
{% endhint %}



* åœ¨Rèªè¨€è£¡ï¼Œè¨ˆç®—å¹³å‡å€¼çš„æŒ‡ä»¤ç‚º`mean()`ã€‚

`mean(Wake_Time_A)` 

`mean(Wake_Time_C)` \#å“ªä¸€ç­å¹³å‡èµ·åºŠæ™‚é–“è¼ƒæ—©å‘¢ï¼Ÿ   


{% hint style="info" %}
#### å¹³å‡å€¼æ˜“å—æ¥µç«¯å€¼å½±éŸ¿
{% endhint %}

* ç•¶è³‡æ–™ä¸­å‡ºç¾æ¥µç«¯å€¼æ™‚ï¼Œå¹³å‡å€¼å®¹æ˜“å—å½±éŸ¿è€Œæ˜é¡¯æ”¹è®Šä½ç½®ã€‚ 
  * `sample_A <- sample(Wake_Time_A,5)` \#å¾Aç­éš¨æ©Ÿé¸å–5äººï¼Œä¸¦å‘½åç‚ºsample\_A 
  * `sample_C <- sample(Wake_Time_C,5)` \#å¾Cç­éš¨æ©Ÿé¸å–5äººï¼Œä¸¦å‘½åç‚ºsample\_C 
  * `sample_A` \#å‘¼å«sample\_Aï¼Œè€å¸«æ­¤æ¬¡æŠ½å–çµæœç‚º $$9,8,6, 8,10$$  
  * `sample_C` \#å‘¼å«sample\_Cï¼Œè€å¸«æ­¤æ¬¡æŠ½å–çµæœç‚º $$9,9,10,8,10.5$$
  * `mean(sample_A)` \#å¹³å‡å€¼ç‚º $$8.2$$ ï¼›æ³¨æ„ï¼ŒåŒå­¸å€‘æŠ½æ¨£çš„çµæœæœƒæœ‰å·®ç•°ï¼Œæ•…å¹³å‡å€¼äº¦æœƒä¸åŒ 
  * `mean(sample_C)` \#å¹³å‡å€¼ç‚º $$9.3$$
  * `sample_A[5] <- 22` \#è‹¥TAä¸å°å¿ƒå°‡sample\_Aç¬¬äº”ä½çš„æ—©ä¸Š10é»ç´€éŒ„æˆæ™šä¸Š10é» 
  * `mean(sample_A)` \#sample\_Açš„å¹³å‡å€¼å°‡æœƒ**å¾** _****_$${\color{OrangeRed}{8.2}}$$ **å¤§å¹…å¢åŠ ç‚º** $${\color{OrangeRed}{10.6}}$$  
* å¯¦å‹™ä¸Šï¼Œå‡ºç¾æ¥µç«¯å€¼ä¸ä¸€å®šæ˜¯ç´€éŒ„èª¤å·®ï¼›ä¾‹å¦‚ï¼ŒæŸåœ°å€å®¶æˆ¶æ‰€å¾—è³‡æ–™åŒ…å«Bill Gatesï¼Œå°±æœƒå¤§å¹…æ‹‰é«˜è©²å€å¹³å‡æ‰€å¾—ã€‚  

### 4.1.3 æ¨™æº–å·®

* ç•¶è³‡æ–™ç‚ºé‡åŒ–è®Šæ•¸æ™‚ï¼Œæˆ‘å€‘å¯ä»¥è¨ˆç®—å…¶æ¨™æº–å·®\(standard deviation\)ï¼Œç”¨ä»¥è¡¡é‡è³‡æ–™çš„é›¢æ•£ç¨‹åº¦ã€‚

{% hint style="info" %}
æ•¸åˆ— $$X_1, X_2, ... , X_N$$ï¼Œå…¶æ¨™æº–å·®ï¼ˆå¯«æˆ $$s$$ï¼Œè€Œ $$s^2$$ ç¨±è®Šç•°æ•¸varianceï¼‰ç‚ºå„æ•¸å­—èˆ‡å¹³å‡å€¼ç›¸æ¸›å¾Œé™¤ä»¥ï¼ˆæ•¸åˆ—å€‹æ•¸-1ï¼‰å†é–‹æ ¹è™Ÿï¼Œäº¦å³ï¼š

æ¨™æº–å·® $$=\sqrt{\frac{\sum_{i=1}^N (X_i-\bar{X})^2}{N-1}} \   = \sqrt{({X_1-\bar{X})^2+ (X_2 - \bar{X})^2 +...+(X_N-\bar{X}})^2 \over {N-1}}$$ 
{% endhint %}

* åœ¨Rèªè¨€è£¡ï¼Œè¨ˆç®—æ¨™æº–å·®çš„æŒ‡ä»¤ç‚º `sd()`ã€‚
  * `sd(Wake_Time_A)` 
  * `sd(Wake_Time_C)` \#å“ªä¸€ç­å¹³å‡èµ·åºŠæ™‚é–“çš„æ¨™æº–å·®è¼ƒå¤§å‘¢ï¼Ÿ 

### 4.1.4 ä¸­ä½æ•¸

* å‡è¨­ $$X_1, X_2, ..., X_5 = 1,2,3,4,5$$ ï¼Œè¨ˆç®—å…¶å¹³å‡å€¼ç‚º $$\bar{X}=3$$ ã€‚
* å‡è¨­ $$Y_1, Y_2, ..., Y_5 = 36,2,3,4,5$$ ï¼Œè¨ˆç®—å…¶å¹³å‡å€¼ç‚ºï¼š

 Â  $$\bar{Y}={{(36+2+3+4+5)} \over {5}}=10$$ 

é¡¯ç„¶åœ°ï¼Œ $$Y$$ æ•¸åˆ—çš„ç¬¬ä¸€ç­†è³‡æ–™æ‹‰é«˜å¹³å‡å€¼ã€‚

* è‹¥æˆ‘å€‘å°‡ä¸Šè¿°å…©æ•¸åˆ—ç”±å°æ’åˆ°å¤§ï¼Œä½æ–¼ä¸­é–“ä½ç½®çš„æ•¸å­—å³ç‚ºä¸­ä½æ•¸\(median\)ã€‚ $$X$$ èˆ‡ $$Y$$ æ•¸åˆ—çš„ä¸­ä½æ•¸åˆ†åˆ¥ç‚º$$3$$ èˆ‡$$4$$ ï¼Œæ•…ä¸­ä½æ•¸è¼ƒä¸å—æ¥µç«¯å€¼å½±éŸ¿ã€‚ 
* è‹¥è¦å°‡æ’åºå¾Œçš„ $$X_1,X_2,X_3,X_4,X_5,X_6,X_7,$$ åˆ‡æˆå››ç­‰ä»½ï¼Œå‰‡éœ€è¦åˆ‡ä¸‰åˆ€ï¼Œåˆ†åˆ¥ç¨±ç‚º $$Q_1=X_2, Q_2=X_4$$ ã€\(äº¦å³ä¸­ä½æ•¸\)ã€ä»¥åŠ $$Q_3=X_6$$ ã€‚ 
* åœ¨Rèªè¨€è£¡ï¼Œè¨ˆç®—ä¸­ä½æ•¸çš„æŒ‡ä»¤å°±æ˜¯ `median ()`ã€‚ 
* ä¸éï¼Œæˆ‘å€‘å¯ä»¥ç›´æ¥å°æŸæ•¸åˆ—ä¸‹ `summary()` æŒ‡ä»¤ï¼ŒRå°±æœƒå›å ±è©²æ•¸åˆ—çš„æœ€å°å€¼ã€ $$Q_1$$ ã€ä¸­ä½æ•¸ã€ $$Q_3$$ ã€æœ€å¤§å€¼ã€ä»¥åŠå¹³å‡å€¼ã€‚

`summary(Wake_Time_A)`  
\#ä»¥ä¸‹ç‚ºè¼¸å‡ºçµæœ

| Min. | 1st Qu. | Median | Mean | 3rd Qu. | Max. |
| :---: | :---: | :---: | :---: | :---: | :---: |
| 5.5 | 8.0 | _**8.5**_ | _**8.5**_ | 9.0 | 12.0 |

`summary(Wake_Time_C)`  
\#ä»¥ä¸‹ç‚ºè¼¸å‡ºçµæœ

| Min. | 1st Qu. | Median | Mean | 3rd Qu. | Max. |
| :---: | :---: | :---: | :---: | :---: | :---: |
| 6.000 | 8.000 | _**9.250**_ | _**9.345**_ | 10.000 | 12.000 |

{% hint style="info" %}
Aç­ç¢ºå¯¦æ¯”è¼ƒæ—©èµ·ï¼Œè€Œå…©ç­åˆ†ä½ˆå‡ç›¸ç•¶å°ç¨±ã€‚
{% endhint %}



### 4.1.5 Boxplot

å¦å¤–ï¼Œæˆ‘å€‘å¯ä»¥ç›´æ¥å°æŸæ•¸åˆ—ä¸‹ `boxplot()`æŒ‡ä»¤ï¼ŒRæœƒç¹ªå‡ºè©²æ•¸åˆ—çš„æœ€å°å€¼ã€ $$Q_1$$ ã€ä¸­ä½æ•¸ã€ $$Q_3$$ ã€æœ€å¤§å€¼ï¼Œç¨±ç‚ºç®±å‹åœ–\(boxplot\)ã€‚ 

![](.gitbook/assets/rplot01.png)

`boxplot(Wake_Time_C)` \#å¯çœ‹å‡ºCç­æ•¸æ“šåˆ†ä½ˆç›¸ç•¶å°ç¨±ï¼Œæ•…å…¶ä¸­ä½æ•¸èˆ‡å¹³å‡å€¼ç›¸è¿‘ã€‚

## 4.2 é›™è®Šæ•¸è³‡æ–™

![](.gitbook/assets/jie-tu-20210222-16.31.03.png)

### 4.2.1 é—œè¯æ€§

* æˆ‘å€‘ç¶“å¸¸å°æ–¼äº‹ç‰©èˆ‡äº‹ç‰©ä¹‹é–“çš„é—œè¯æ€§æ„Ÿåˆ°èˆˆè¶£ï¼Œä¸¦è©¦è‘—å°‹æ±‚å› æœé—œä¿‚çš„è§£é‡‹ã€‚ç„¶è€Œï¼Œé—œè¯æ€§ä¸¦ä¸ä¸€å®šä»£è¡¨æœ‰å› æœé—œä¿‚å­˜åœ¨ã€‚  
* ä¾‹ï¼Œ$$X=$$ æ‰“ç«æ©Ÿæ•¸é‡ï¼Œ $$Y=$$è‚ºç™Œç™¼ç”Ÿç‡ï¼Œé›–ç„¶è³‡æ–™é¡¯ç¤º$$X$$èˆ‡$$Y$$æœ‰é¡¯è‘—çš„é—œè¯æ€§ï¼Œä½†ä¸èƒ½ç›´æ¥èªª$$X$$å°è‡´$$Y$$ã€‚WHY? 
* ç„¡è«–å¦‚ä½•ï¼Œå…ˆèƒ½å¾è³‡æ–™ä¸­çœ‹å‡ºæœ‰è¶£çš„é—œè¯æ€§ç‚ºç¬¬ä¸€æ­¥ã€‚ é–‹å§‹å›‰ï¼

`data1<- read.csv("D://data/ç”²ç­å°è€ƒç´€éŒ„.csv")` 

`data2<- read.csv("D://data/ä¹™ç­å°è€ƒç´€éŒ„.csv")` 

`Wake_Time_A<-data1$èµ·åºŠæ™‚é–“` 

`Wake_Time_C<-data2$èµ·åºŠæ™‚é–“` 

`Bed_A<-data1$ç¡è¦ºæ™‚é–“` 

`Bed_C<-data2$ç¡è¦ºæ™‚é–“` 

### 

### 4.2.2 æ•£ä½ˆåœ–

* æˆ‘å€‘ç”¨æ•£ä½ˆåœ–\(scatterplot\)å°‡ç¡è¦ºæ™‚é–“æ”¾Xè»¸ï¼Œè€Œèµ·åºŠæ™‚é–“æ”¾Yè»¸ï¼Œå†æŠŠå…©ç­åŒå­¸çš„è³‡æ–™ï¼Œä»¥æ¯äººç‚ºä¸€é»çš„æ–¹å¼ç¹ªåœ¨åœ–ä¸­ã€‚
* ä¸éï¼Œæ™šä¸Š22é»è¦å¦‚ä½•è·ŸåŠå¤œ2é»æ¯”è¼ƒï¼Œè³‡æ–™éœ€è¦èª¿æ•´ä¸€ä¸‹ã€‚ 

`Bed_Time_A <- ifelse(Bed_A<12,Bed_A+24,Bed_A)`  
\#ç”¨ifelseæŒ‡ä»¤ä¾†èª¿æ•´ç¡è¦ºæ™‚é–“Bed\_Aä¸¦æ–°å‘½åç‚ºBed\_Time\_A: è‹¥åŠå¤œ2é»ç¡\(&lt;12\)ï¼Œå‰‡ç´€éŒ„ç‚º24+2ï¼›è‹¥æ™šä¸Š22é»ç¡\(&gt;12\)ï¼Œå‰‡ç´€éŒ„ä»ç‚º22 

`Bed_Time_C <- ifelse(Bed_C<12,Bed_C+24,Bed_C)` 

`par(mfrow=c(1,2))` 

`plot(Bed_Time_A,Wake_Time_A,col="blue",pch=16)` \#pch=16æŒ‡å¯¦å¿ƒåŸé» 

`plot(Bed_Time_C,Wake_Time_C,col="blue",pch=16)` \#å…¶å®ƒpchè«‹åƒè¦‹Reference Card 

#### ç¡è¦ºæ™‚é–“èˆ‡èµ·åºŠæ™‚é–“ä¹‹æ•£ä½ˆåœ–

* å¾æ•£ä½ˆåœ–çœ‹å‡ºï¼Œä¼¼ä¹ç¡è¦ºæ™‚é–“è¼ƒæ™šçš„äººï¼Œå…¶èµ·åºŠæ™‚é–“äº¦è¼ƒæ™šã€‚ 
* é€²ä¸€æ­¥çš„å•é¡Œæ˜¯ï¼Œæ­¤æ­£å‘é—œè¯æ€§æœ‰å¤šå¼·ï¼Œå…©ç­ä¸€æ¨£å—ï¼Ÿ

![](.gitbook/assets/jie-tu-20210222-16.38.29.png)

### 4.2.3 ç›¸é—œä¿‚æ•¸

* $$X$$ èˆ‡ $$Y$$ç‚ºé‡åŒ–è®Šæ•¸æ™‚ï¼Œæˆ‘å€‘å¯ä»¥è¨ˆç®—å…¶ç›¸é—œä¿‚æ•¸\(correlation\)ï¼Œç”¨ä»¥è¡¡é‡ $$X$$èˆ‡$$Y$$ çš„é—œè¯æ€§ç¨‹åº¦é«˜ä½ã€‚

{% hint style="info" %}
è‹¥æœ‰å…©ä¸²æ•¸åˆ— $$X_1,X_2,...,X_N$$ä»¥åŠ $$Y_1,Y_2,...,Y_5$$ ï¼Œå…¶å¹³å‡å€¼èˆ‡æ¨™æº–å·®åˆ†åˆ¥ç‚º$$\bar{X}$$ èˆ‡ $$\bar{Y}$$ ä»¥åŠ $$S_X$$ èˆ‡$$S_Y$$ ï¼Œç›¸é—œä¿‚æ•¸ç‚ºå…©æ•¸åˆ—æ¨™æº–åŒ–å¾Œä¹‹ä¹˜ç©åŠ èµ·ä¾†ï¼Œå†é™¤ä»¥$$N-1$$ ï¼Œäº¦å³:

ç›¸é—œä¿‚æ•¸ $$={\sum_{i=1}^N  \bigl(\begin{smallmatrix} \frac{\mathrm{X_i-\bar{X}} }{\mathrm{S_X}} \end{smallmatrix}\bigr)   \bigl(\begin{smallmatrix} \frac{\mathrm{Y_i-\bar{Y}} }{\mathrm{S_Y}} \end{smallmatrix}\bigr)  \over N-1}$$ 
{% endhint %}

* ç†è«–ä¸Šï¼Œç›¸é—œä¿‚æ•¸ä¹‹å€¼ä»‹æ–¼$$-1$$ è‡³ $$+1$$ ä¹‹é–“ã€‚

### 4.2.4 è¨ˆç®—ç›¸é—œä¿‚æ•¸

* åœ¨Rèªè¨€è£¡ï¼Œè¨ˆç®—ç›¸é—œä¿‚æ•¸çš„æŒ‡ä»¤ç‚ºcor\(\)

`cor(Bed_Time_A,Wake_Time_A)`   
\#Aç­ç¡è¦ºæ™‚é–“èˆ‡èµ·åºŠæ™‚é–“çš„ç›¸é—œä¿‚æ•¸ç‚º0.5125695 

`cor(Bed_Time_C,Wake_Time_C)`   
\#Cç­ç¡è¦ºæ™‚é–“èˆ‡èµ·åºŠæ™‚é–“çš„ç›¸é—œä¿‚æ•¸ç‚º0.5156468  
 

* å¦å¤–ï¼Œå†è¨ˆç®—ç¡è¦ºæ™‚é–“èˆ‡å°è€ƒåˆ†æ•¸çš„ç›¸é—œä¿‚æ•¸

`Score_A <-data1$å°è€ƒåˆ†æ•¸` 

`Score_C <-data2$å°è€ƒåˆ†æ•¸` 

`cor(Bed_Time_A,Score_A)`   
\#Aç­ç¡è¦ºæ™‚é–“èˆ‡å°è€ƒåˆ†æ•¸çš„ç›¸é—œä¿‚æ•¸ç‚º0.03673618 

`cor(Bed_Time_C,Score_C)`  
\#Cç­ç¡è¦ºæ™‚é–“èˆ‡å°è€ƒåˆ†æ•¸çš„ç›¸é—œä¿‚æ•¸ç‚º-0.06096085   


### 4.2.5 ç¡è¦ºæ™‚é–“èˆ‡å°è€ƒåˆ†æ•¸ä¹‹æ•£ä½ˆåœ–

`par(mfrow=c(1,2))` 

`plot(Bed_Time_A,Score_A,col="blue",pch=16)` 

`plot(Bed_Time_C,Score_C,col="blue",pch=16)` 

![](.gitbook/assets/jie-tu-20210224-10.02.01.png)

### 

### 4.2.6 ä¸åŒç›¸é—œä¿‚æ•¸ä¹‹æ•£ä½ˆåœ–

* ç†è«–ä¸Šï¼Œç›¸é—œä¿‚æ•¸ä¹‹å€¼ä»‹æ–¼$$-1$$ è‡³ $$+1$$ä¹‹é–“ã€‚ 
* ç›¸é—œä¿‚æ•¸$$=1$$æ™‚ç¨±å®Œå…¨æ­£ç›¸é—œï¼Œè€Œç›¸é—œä¿‚æ•¸$$=-1$$æ™‚ç¨±å®Œå…¨è² ç›¸é—œã€‚ 
* æˆ‘å€‘å°‡ä¸Šè¿°å››å¼µåœ–ä»¥åŠå…©ç¨®æ¥µç«¯æƒ…æ³ç¹ªåœ¨ä¸€èµ·æ¯”è¼ƒã€‚ 

`par(mfrow=c(2,3))` 

`plot(1:30,1:30,col="blue",pch=16,main="cor= 1")` 

`plot(Bed_Time_A,Wake_Time_A,col="blue",pch=16,main="cor= 0.5258")` 

`plot(Bed_Time_C,Wake_Time_C,col="blue",pch=16,main="cor= 0.5156")` 

`plot(Bed_Time_A,Score_A,col="blue",pch=16,main="cor= 0.008")` 

`plot(Bed_Time_C,Score_C,col="blue",pch=16,main="cor= -0.060")` 

`plot(1:30,2*(30:1),col="blue",pch=16,main="cor= -1")` 

![](.gitbook/assets/jie-tu-20210224-10.05.47.png)

### 

### 4.2.7 æ¢è¨æ€§åˆ¥å·®ç•°

* è‹¥è³‡æ–™ä¸­æœ‰é¡åˆ¥è®Šæ•¸\(Categorical Variableï¼Œæˆ–ç¨±è³ªæ€§è®Šæ•¸\)ï¼Œæˆ‘å€‘å¯é€²ä¸€æ­¥å€åˆ†ï¼Œä¸åŒé¡åˆ¥çš„ç›¸é—œä¿‚æ•¸ä¹‹å·®ç•°ã€‚ 
*  å¯¦å‹™ä¸Šï¼Œ**æ€§åˆ¥è®Šæ•¸å¸¸å¸¸æ˜¯é‡è¦çš„å·®ç•°ä¾†æº**ã€‚  
* ä¸éï¼Œé¡åˆ¥è®Šæ•¸éé‡åŒ–è®Šæ•¸ï¼Œç„¡æ³•ç®—å¹³å‡èˆ‡æ¨™æº–å·®ï¼Œæ•…ä¸èƒ½ç®—é¡åˆ¥è®Šæ•¸èˆ‡é‡åŒ–è®Šæ•¸é–“çš„ç›¸é—œä¿‚æ•¸ã€‚ 
* å› æ­¤ï¼Œæˆ‘å€‘**ä¾é¡åˆ¥è®Šæ•¸åŠ ä»¥åˆ†ç¾¤**ï¼Œå†ä¾†è¨ˆç®—ä¸åŒç¾¤é–“é‡åŒ–è®Šæ•¸çš„ç›¸é—œä¿‚æ•¸ã€‚ 

`data1<- read.csv("D://data/ç”²ç­å°è€ƒç´€éŒ„.csv")` 

`m<- subset(data1,æ€§åˆ¥=="ç”·")`  
\#subsetæ˜¯å°‡data1ä¸­æ€§åˆ¥è®Šæ•¸ç‚º"ç”·"çš„è³‡æ–™æŠ½å‡ºä¾†ï¼Œä¸¦å­˜ç‚ºç‰©ä»¶m 

`w<- subset(data1,æ€§åˆ¥=="å¥³")`  
\#åŒç†ï¼Œå°‡å¥³åŒå­¸å­˜ç‚ºç‰©ä»¶w   


### 4.2.8 ç”·å¥³åŒå­¸ç›¸é—œä¿‚æ•¸çš„å·®ç•°

`Wake_Time_M<-m$èµ·åºŠæ™‚é–“` \#å®šç¾©ç”·åŒå­¸èµ·åºŠæ™‚é–“ï¼Œä»¥ä¸‹é¡æ¨ 

`Wake_Time_W<-w$èµ·åºŠæ™‚é–“`

`Bed_M<-m$ç¡è¦ºæ™‚é–“` 

`Bed_W<-w$ç¡è¦ºæ™‚é–“` 

`Bed_Time_M<- ifelse(Bed_M<12,Bed_M+24,Bed_M)`  
\#ç¡è¦ºæ™‚é–“å¿…é ˆèª¿æ•´ï¼Œåƒè¦‹å‰é¢èªªæ˜ 

`Bed_Time_W<- ifelse(Bed_W<12,Bed_W+24,Bed_W)` 

`cor(Bed_Time_M,Wake_Time_M)`   
\#Aç­**ç”·åŒå­¸**ç¡è¦ºæ™‚é–“èˆ‡èµ·åºŠæ™‚é–“çš„ç›¸é—œä¿‚æ•¸ç‚º $$0.71574 $$ 

`cor(Bed_Time_W,Wake_Time_W)`  
\#Aç­**å¥³åŒå­¸**ç¡è¦ºæ™‚é–“èˆ‡èµ·åºŠæ™‚é–“çš„ç›¸é—œä¿‚æ•¸ç‚º $$0.3357862 $$ 

{% hint style="warning" %}
Aç­ç”·å¥³åŒå­¸é–“ç¡è¦ºæ™‚é–“èˆ‡èµ·åºŠæ™‚é–“çš„ç›¸é—œä¿‚æ•¸å·®ç•°é —å¤§ã€‚ Why?
{% endhint %}

> ### å…ˆæŠŠè³‡æ–™ç•«å‡ºä¾†çœ‹ ğŸ‘©ğŸ’»ğŸ“ˆğŸ‘¨ğŸ’»

`par(mfrow=c(1,2))` 

`plot(Bed_Time_M,Wake_Time_M,col="blue",pch=16)` 

`plot(Bed_Time_W,Wake_Time_W,col="red",pch=16)` 

![](.gitbook/assets/jie-tu-20210224-11.06.05.png)

### 

> ### è¤‡ç¿’ä¸€ä¸‹ï¼šç›¸é—œä¿‚æ•¸ğŸ‘‰

{% hint style="info" %}
è‹¥æœ‰å…©ä¸²æ•¸åˆ— $$X_1, X_2, ..., X_N$$ ä»¥åŠ $$Y_1, Y_2, ..., Y_N$$ ï¼Œå…¶å¹³å‡å€¼èˆ‡æ¨™æº–å·®åˆ†åˆ¥ç‚º $$\bar{X}$$ èˆ‡ $$\bar{Y}$$ ä»¥åŠ $$S_X$$ èˆ‡ $$S_Y$$ ï¼Œç›¸é—œä¿‚æ•¸ç‚ºå…©æ•¸åˆ—**æ¨™æº–åŒ–**å¾Œä¹‹ä¹˜ç©åŠ èµ·ä¾†ï¼Œå†é™¤ä»¥ $$N-1$$ ï¼Œäº¦å³ï¼š

ç›¸é—œä¿‚æ•¸ $$={\sum_{i=1}^N  \bigl(\begin{smallmatrix} \frac{\mathrm{X_i-\bar{X}} }{\mathrm{S_X}} \end{smallmatrix}\bigr)   \bigl(\begin{smallmatrix} \frac{\mathrm{Y_i-\bar{Y}} }{\mathrm{S_Y}} \end{smallmatrix}\bigr)  \over N-1}$$ 
{% endhint %}

`(Bed_Time_M-mean(Bed_Time_M))/sd(Bed_Time_M)`  
\#å°‡è³‡æ–™æ¨™æº–åŒ–ä½†å¯ç”¨`scale()`æ›¿ä»£ 

`sBed_Time_M<- scale(Bed_Time_M)`  
\#å°‡ç”·åŒå­¸ç¡è¦ºæ™‚é–“æ•¸å€¼æ¨™æº–åŒ–ä¸¦ç¨±sBedâ€¦ï¼Œä»¥ä¸‹é¡æ¨ 

`sWake_Time_M<- scale(Wake_Time_M)` 

`sBed_Time_W<- scale(Bed_Time_W)` 

`sWake_Time_W<- scale(Wake_Time_W)` 



### 4.2.9 å†å°‡æ¨™æº–åŒ–å‰å¾Œçš„è³‡æ–™ç•«å‡ºä¾†æ¯”è¼ƒ

`par(mfrow=c(2,2))` 

`plot(Bed_Time_M,Wake_Time_M,col="blue",pch=16,main="Original")` 

`plot(Bed_Time_W,Wake_Time_W,col="red",pch=16,main="Original")` 

`plot(sBed_Time_M,sWake_Time_M,col="blue",pch=16,main="Standardized")` 

`abline(v=0,h=0,col="darkgray")`  
\#åœ¨ç¬¬ä¸‰å¼µåœ–åŠ å…¥x=0åŠy=0çš„å…©æ¢ç°è‰²ç›´ç·š 

`plot(sBed_Time_W,sWake_Time_W,col="red",pch=16,main="Standardized")` 

`abline(v=0,h=0,col="darkgray")`  
\#åœ¨ç¬¬å››å¼µåœ–åŠ å…¥x=0åŠy=0çš„å…©æ¢ç°è‰²ç›´ç·š 

![](.gitbook/assets/jie-tu-20210224-11.13.13.png)

## 4.3 Programming

![](.gitbook/assets/jie-tu-20210224-11.14.48.png)

### 4.3.1 forçš„ç¨‹å¼èªæ³•

* Rèªè¨€æœ‰è¨±å¤šç¨‹å¼èªæ³•ï¼Œè®“é›»è…¦åŸ·è¡Œé‡è¤‡çš„å‹•ä½œï¼Œå¯ä»¥å¤§å¹…å¢åŠ å·¥ä½œæ•ˆç‡ï¼Œæˆ‘å€‘å…ˆä»‹ç´¹ for çš„æ‡‰ç”¨ã€‚ 

`a <-1:6` \#è£½é€ 1,2,..,6æ•¸åˆ— 

`b <- rep(1,6)` \#è£½é€ é‡è¤‡1çš„æ•¸åˆ—ä¸”é•·åº¦ç‚º6ï¼Œæ›è¨€ä¹‹ï¼Œ6å€‹1 

`c <- rep(0,6)` \#è£½é€ é‡è¤‡0çš„æ•¸åˆ—ä¸”é•·åº¦ç‚º6ï¼Œæ›è¨€ä¹‹ï¼Œ6å€‹0 

`for (i in 1:6){` 

`c[i]<- b[i]+a[i]` \#è«‹Rå¾i=1é–‹å§‹åŸ·è¡Œ{}å…§çš„äº‹æƒ…ä¸€ç›´åˆ°é‡è¦†åŸ·è¡Œåˆ°i=6 

`}` 

`c` \#å‘¼å«é‡æ–°è¨ˆç®—å¾Œä¹‹cï¼Œå¯è§€å¯Ÿåˆ°åŸæœ¬6å€‹0å·²ä¾åºè¢«2,3,4,5,6,7å–ä»£   


### 4.3.2 for è¨ˆç®—ç§»å‹•å¹³å‡èˆ‡æ¨™æº–å·®

* ç”±{1,2,3,4,5,6}æ•¸åˆ—ä¸­ï¼Œè¨ˆç®—è·é›¢ç‚º3çš„ç§»å‹•å¹³å‡èˆ‡æ¨™æº–å·®ã€‚

`x<- 1:6` \#å‰µé€ 1,2,â€¦,6æ•¸åˆ—x 

`m<- 3` \#å®šç¾©è·é›¢ç‚º3 

`t<- length(x)` \#è¨ˆç®—xçš„é•·åº¦\(è³‡æ–™å€‹æ•¸\) 

`y<- rep(0,t-m+1)` \#å‰µé€ 0,0,â€¦,0æ•¸åˆ—yï¼Œè®“è¨ˆç®—å¾Œçš„ç§»å‹•å¹³å‡æ•¸å€¼å„²å­˜ 

`v<- rep(0,t-m+1)` \#å‰µé€ 0,0,â€¦,0æ•¸åˆ—vï¼Œè®“è¨ˆç®—å¾Œçš„æ¨™æº–å·®å„²å­˜ 

`n<- length(y)` \#è¨ˆç®—yçš„é•·åº¦\(è³‡æ–™å€‹æ•¸\) 

`for (i in 1:n){` 

`y[i] <-mean(x[i:(i+m-1)])` \#è¨ˆç®—ç§»å‹•å¹³å‡ä¸¦å–ä»£y\[i\] 

`v[i] <-sd(x[i:(i+m-1)])` \#è¨ˆç®—ç§»å‹•æ¨™æº–å·®ä¸¦å–ä»£v\[i\] 

`}` \# ä¸Šè¿°forçš„ç¨‹å¼èªæ³•ï¼ŒRæœƒå°‡iå¾1æ•¸åˆ°nä¸¦ä¾æ¬¡ä»£å…¥{ }ä¸­åŠ ä»¥è¨ˆç®— 

`y` \#å‘¼å«ç§»å‹•å¹³å‡ 

`v` \#å‘¼å«ç§»å‹•æ¨™æº–å·® 

## 4.4 å¯¦ä¾‹åˆ†æ

![](.gitbook/assets/jie-tu-20210224-11.20.39.png)

### 4.4.1 å°ç©é›»\(TSMC\)è‚¡åƒ¹çš„æ­·å²åƒ¹æ ¼è³‡æ–™ç‚ºä¾‹

`data <- read.csv("D://data/TSMC_UMC.csv")` 

`head(data)` 

`attach(data)` 

`plot(æ—¥æœŸ,å°ç©é›»æ”¶ç›¤åƒ¹_æ–°å°å¹£å…ƒ,main="TSMC Stock Price")` 

![](.gitbook/assets/jie-tu-20210224-11.22.53.png)

{% file src=".gitbook/assets/tsmc\_umc \(1\).txt" caption="TSMC\_UMC.txt" %}

{% file src=".gitbook/assets/tsmc\_umc \(2\).csv" caption="TSMC\_UMC.csv" %}

{% file src=".gitbook/assets/tsmc\_umc\_english \(1\).txt" %}

{% file src=".gitbook/assets/tsmc\_umc\_english.csv" caption="TSMC\_UMC\_English.csv" %}

### 4.4.2 TSMCè‚¡åƒ¹çš„ç§»å‹•å¹³å‡èˆ‡æ¨™æº–å·®åœ–

```r
x<- å°ç©é›»æ”¶ç›¤åƒ¹_æ–°å°å¹£å…ƒ
m<- 100
t<- length(x)
y<- rep(0,t-m+1)
v<- rep(0,t-m+1)
n<- length(y)
for (i in 1:n){
y[i] <-mean(x[i:(i+m-1)])
v[i] <-sd(x[i:(i+m-1)])
}
par(mfrow=c(2,1))
plot(y,type="l",col="blue",main="TSMC Price MA",ylab="MA of 100 days",xlab="Time")
plot(v,type="l",col="blue",main=" TSMC Price MS",ylab="MS of 100 days ",xlab="Time")
```

![](.gitbook/assets/jie-tu-20210224-11.35.57.png)

{% hint style="info" %}
ğŸ¤” ï¼±ï¼šç‚ºä½•TSMCè¿‘æœŸè‚¡åƒ¹æ³¢å‹•ï¼ˆæ¨™æº–å·®ï¼‰è¶Šå¤§ï¼Ÿ
{% endhint %}

{% hint style="success" %}
ğŸ‘‡ Tryï¼šçµ¦å®šm=60æ—¥ï¼Œç¹ªå‡ºè¿‘500å€‹äº¤æ˜“æ—¥ç§»å‹•å¹³å‡èˆ‡æ¨™æº–å·®åœ–
{% endhint %}

```r
data<- read.csv("D://data/TSMC_UMC.csv")
attach(data)
d<- length(å°ç©é›»æ”¶ç›¤åƒ¹_æ–°å°å¹£å…ƒ)-500
x<- å°ç©é›»æ”¶ç›¤åƒ¹_æ–°å°å¹£å…ƒ[-(1:d)]
m<- 60
t<- length(x)
y<- rep(0,t-m+1)
v<- rep(0,t-m+1)
n<- length(y)
for (i in 1:n){
y[i] <-mean(x[i:(i+m-1)])
v[i] <-sd(x[i:(i+m-1)])
}
par(mfrow=c(2,1))
plot(y,type="l",col="blue",main="TSMC Price Moving Average during the Last 500 Days",ylab=" MA of 60 days",xlab="Time")
plot(v,type="l",col="blue",main=" TSMC Price Moving SD during the Last 500 Days ",ylab=" MS of 60 days ",xlab="Time")
```

![](.gitbook/assets/jie-tu-20210224-13.17.31.png)

### 4.4.3 TSMCèˆ‡è¯é›»\(UMC\)è‚¡åƒ¹çš„ç§»å‹•ç›¸é—œä¿‚æ•¸

```r
data<- read.csv("D://data/TSMC_UMC.csv") 
attach(data) 
x1<- å°ç©é›»æ”¶ç›¤åƒ¹_æ–°å°å¹£å…ƒ 
x2<- è¯é›»æ”¶ç›¤åƒ¹_æ–°å°å¹£å…ƒ 
m<- 100 
t<- length(x1) 
y1<- rep(0,t-m+1) 
y2<- rep(0,t-m+1) 
c<- rep(0,t-m+1) 
n<- length(y1) 
for (i in 1:n){ 
y1[i] <-mean(x1[i:(i+m-1)]) 
y2[i] <-mean(x2[i:(i+m-1)]) 
c[i] <-cor(x1[i:(i+m-1)],x2[i:(i+m-1)]) 
} 
par(mfrow=c(3,1)) 
plot(y1,type="l",col="blue",main="å°ç©é›»è‚¡åƒ¹ç§»å‹•å¹³å‡",ylab="100æ—¥ç§»å‹•å¹³å‡å€¼",xlab="æ™‚é–“") 
plot(y2,type="l",col="blue",main="è¯é›»è‚¡åƒ¹ç§»å‹•å¹³å‡",ylab="100æ—¥ç§»å‹•å¹³å‡å€¼",xlab="æ™‚é–“") 
plot(c,type="l",col="blue",main="å°ç©é›»èˆ‡è¯é›»è‚¡åƒ¹ç›¸é—œä¿‚æ•¸",ylab="100æ—¥ç§»å‹•ç›¸é—œä¿‚æ•¸",xlab="æ™‚é–“") 
abline(h=0,col="darkgray") 
```

![](.gitbook/assets/jie-tu-20210224-13.42.07.png)

{% hint style="success" %}
**æœ‰æ²’æœ‰å•é¡Œï¼Ÿ**
{% endhint %}

## ä½œæ¥­

* çµ¦å®šm=60æ—¥ï¼Œè«‹ç¹ªå‡ºå°ç©é›»è‚¡åƒ¹æœ€è¿‘500å€‹äº¤æ˜“æ—¥ä¹‹**æ—¥å ±é…¬ç‡**ç§»å‹•å¹³å‡èˆ‡
* æ¨™æº–å·®åœ–ã€‚ 
* çµ¦å®šm=60æ—¥ï¼Œè«‹ç¹ªå‡ºå°ç©é›»èˆ‡è¯é›»è‚¡åƒ¹æœ€è¿‘5000å€‹äº¤æ˜“æ—¥ä¹‹**æ—¥å ±é…¬ç‡**ç§»å‹•ç›¸é—œä¿‚æ•¸åœ–ã€‚
* åŒå­¸å¿…é ˆå°‡å…¶ä¸Šè¿°çµæœä¹‹**ç¨‹å¼ç¢¼**é™„åœ¨ç¹³äº¤ä½œæ¥­ä¸­ã€‚ 

{% hint style="info" %}
å ±é…¬ç‡ç®—æ³•æç¤º: 

`p<- 1:6` 

`x<- (p[-1]-p[-6])/p[-6]`
{% endhint %}

## è¤‡ç¿’ä¸€ä¸‹

* ä½•è¬‚æ¨™æº–å·®ï¼Ÿå¦‚ä½•ç®—ï¼Ÿ
* ç›¸é—œä¿‚æ•¸ç†è«–ç¯„åœï¼Ÿå¦‚ä½•è§£é‡‹? 
* foræŒ‡ä»¤ä½œç”¨ç‚ºä½•ï¼Ÿ
* ä½•è¬‚ç§»å‹•å¹³å‡å€¼ï¼Ÿ
* åŠ æ²¹ï¼

