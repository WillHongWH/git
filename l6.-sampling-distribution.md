# L6. Sampling Distribution

## 今天要談

* 抽樣調查
* 中央極限定理
* 實例模擬
* 比例抽樣

## 抽樣調查

* 當我們探討對象或**群體數目很大**時，要蒐集全部資料可能很耗時間與金錢成本，此時進行**抽樣調查**是實際上常用的方式。
* 我們要怎樣進行抽樣與解讀抽樣結果？
* 例如，主計處要公布每月失業率，不可能每一次都調查全國**1738萬**的勞動力人口。
* 事實上，全世界國家公佈的每月失業率都是抽樣調查結果。 

{% hint style="info" %}
* **勞動力**：指15歲以上可以工作之民間人口，包括就業者及失業者。  
* **非勞動力**：指15歲以上不屬於勞動力之民間人口，包括因求學或準備升學、料理家務、高齡、身心障礙、想工作而未找工作及其他原因等，而未工作亦未找工作者。 
{% endhint %}

## 隨機抽樣實作

* 我們在班上進行下列問卷，並請同學隨機抽樣調查五位同學的答案作為估計樣本。

1. 請問你昨日使用手機講了幾通電話\(打來與撥出皆算\): $$0$$ 
2. 你猜測全班同學平均每人昨日使用手機講了幾通電話: $$1.5$$ 
3. 請隨機詢問班上五位同學的昨日使用手機講了幾通電話，填在下表並計算平均值\(四捨五入計算到小數點第一位\)。 

| 第一位  | 第二位  | 第三位  | 第四位  | 第五位  |
| :---: | :---: | :---: | :---: | :---: |
| $$1$$  | $$0$$  | $$1$$  | $$2$$  | $$1$$  |

* 五位同學平均值: $$1.5$$ 

## 母體與樣本

* 如果我們關心全班的通話次數，那麼研究母體\(population\)就是全班學生。
* 全班通話次數平均值，稱為母體參數\(parameter\)。 
* 每位同學抽樣調查五位同學的答案，即為樣本\(sample\)。 
* 計算樣本中五位同學的通話次數平均值，稱為樣本統計\(sample statistic\)。每位同學調查平均值之分佈，即為抽樣分配。
* 從同學的立場，是用樣本統計去推估母體參數；換言之，就是用樣本平均值去猜測全班通話次數平均值。
* 如果，我們研究全國學生通話次數，何為母體? 何為樣本? 

## 結果分析

`data<- read.csv("D://data/手機通話調查.csv")` 

`attach(data)` 

`mean(call)` \#自己通話次數之母體平均值 

`mean(guess)` \#個人猜測結果之平均值 

`mean(sample_mean)` \#全班抽樣結果之平均值 

`par(mfrow=c(1,3))` 

`hist(call)` 

`hist(guess)` 

`hist(sample_mean)` 

## 去除outliner

`par(mfrow=c(1,3))` 

`hist(call[-62])` \#拿掉第62筆資料 

`hist(guess[-62])` 

`hist(sample_mean[-62])` 

`mean(call[-62])` 

`mean(guess[-62])` 

`mean(sample_mean[-62])`

## 電腦抽樣

* 如果同學抽樣只問坐在附近的人，會影響推論結果嗎? 
* 若有影響，如何避免? 

`sam<- function(x,n){` 

`y<- 1:length(x)` 

`for (i in 1:length(x)){` 

`y[i]<- mean(sample(x,n))` 

`}` 

`y` 

`}` 

\# 我們創造一個`function`叫`sam(x,n)`，等會只要帶入x與n，R就會計算{ }內所有事情 

## 試試樣本數增加的結果

`m<- max(call) #將全班通話次數最高值記為m` 

\# 以下圖形將x軸固定在0-m之範圍以方便比較 

`par(mfrow=c(2,3))` 

`hist(call,xlim=c(0,m))` 

`hist(guess[-62],xlim=c(0,m))` 

`hist(sample_mean,xlim=c(0,m))` 

`hist(sam(call,5),xlim=c(0,m))` 

`hist(sam(call,25),xlim=c(0,m))` 

`hist(sam(call,50),xlim=c(0,m))` 

## 隨機抽樣與樣本增加的效果

![](.gitbook/assets/jie-tu-20210224-18.55.08.png)

## 分開檢視男女同學資料

 `male<- subset(data[-62,],gender=="1")` 

\#將男同學\(gender==1\)資料存成male 

`female<- subset(data[-62,],gender=="0")` 

\#將女同學\(gender==0\)資料存成female ``

`par(mfrow=c(2,3))` 

`hist(male$call,xlim=c(0,m))` 

`hist(male$guess,xlim=c(0,m))` 

`hist(male$sample_mean,xlim=c(0,m))` 

`hist(female$call,xlim=c(0,m))` 

`hist(female$guess,xlim=c(0,m))` 

`hist(female$sample_mean,xlim=c(0,m))` 

## 男女是否有差異?

![](.gitbook/assets/jie-tu-20210224-18.57.04.png)

## 中央極限定理

![](.gitbook/assets/jie-tu-20210224-19.39.32.png)

## 全校各年級成績平均值

* 我們以全校學生的學期成績調查為例。
* 在99學年度下學期，Alpha同學進行「大學生延畢原因與調查」的專題研究時，想要了解全校不同年級學生的平均成績是否有差異，特別是**大五延畢生**的學業成績表現。 
* 他的基本猜測: 大一 &lt; 大二 &lt; 大三 &lt; **大五** &lt; 大四。 Why? 
* 此時，全校12905位大學生為研究的**母體**。 
* 另外，Alpha透過線上問卷調查，得到245位學生的完整回覆資料。 這245位學生則為研究之**樣本**。
* Alpha將利用樣本的訊息去猜測母體的真正數值。 

## 中央極限定理\(Central Limit Theorem\)

* 若Alpha樣本裡有$$n=49$$ 位大五生成績 $$(x_i, i=1,2, ..., n)$$ ，他可以計算樣本平均值 $$\bar{x}_{alpha}=(x_1+x_2+ ...+x_{49})/n$$ 。  
* 假設另外有 $$n$$ 個專題學生 $$\text{Beta}, \text{Gamma}, ...\text{Sigma}$$等都跟$$\text{Alpha}$$ 做一樣的抽樣調查，即有 $$t$$ 筆樣本平均值 $$\begin{matrix} \underbrace{\bar{X}_\text{Alpha}, \bar{X}_\text{Beta},... ,\bar{X}_\text{Sigma}}\\ \text{t averages} \end{matrix}$$ 。 
*  中央極限定理：令母體資料之平均值與標準差為 $$\mu$$ 與 $$\sigma$$ 。 若每次抽樣數目 $$\text{n}$$ 夠多，不論母體分配為何，重複抽取 $$t$$ 次之樣本平均值會呈現平均為 $$\mu$$ 而標準差為 $${\frac{\sigma}{\sqrt{n}}}$$ 之常態分配。 

## 實例模擬

![](.gitbook/assets/jie-tu-20210224-21.13.59.png)

## 我們用真實的資料來實驗一遍

* 首先打開R，然後讀入99學年上學期全校成績資料如下：

`data <- read.csv("D://data/991_scores.csv")` 

`summary(data)` \# 檢視資料的基本特徵如何 

`data1 <- subset(data,year=="1")` \#將1年級學生成績存成data1 

`data2 <- subset(data,year=="2")` \#將2年級學生成績存成data2 

`data3 <- subset(data,year=="3")` \#同理類推 

`data4 <- subset(data,year=="4")` \#同理類推 

`data5 <- subset(data,year=="5")` \#同理類推 

{% file src=".gitbook/assets/991\_scores.csv" caption="991\_scores.csv" %}

## Alpha隨機抽樣結果 

`一年級 <- sample(data1$academic,49)` \#抽49位1年級學生成績 

`二年級 <- sample(data2$academic,49)` \#抽49位2年級學生成績 

`三年級 <- sample(data3$academic,49)` \#同理類推 

`四年級 <- sample(data4$academic,49)` \#同理類推 

`五年級 <- sample(data5$academic,49)` \#同理類推 

`sample <- cbind(一年級,二年級,三年級,四年級,五年級)` \#將抽樣結果合併 

`write.csv(sample,file="D://data/991全校學生成績抽樣.csv",row.names=F)` \# 將抽樣結果以csv格式寫入電腦並存成"991全校學生成績抽樣.csv"之檔案

## Mac讀入Alpha的隨機抽樣結果

* 將抽樣結果合併為sample後，然後用下列指令寫入資料：

`write.csv(sample,file="desktop/全校學生抽樣調查.csv",row.names=F)` 

\# Mac桌面上就會有全校學生抽樣調查之csv檔案出現。

* 另外，如果檔案中的中文出現亂碼，請一開始讀入資料時，即將R編碼設定為big 5如下: 

`data<-read.csv(file.choose(), fileEncoding='big5')` 

\# 這是因為Mac預設的編碼為萬國碼utf，所以加上`,fileEncoding='big5'`，將選擇的檔案用big5編碼開啟。 

{% hint style="success" %}
以上感謝蔡佳樺、陳冠中、劉正祥同學們提供之解決方案！
{% endhint %}

## 檢視Alpha的隨機抽樣結果 

`summary(sample)`

* 是否符合其基本猜測: 大一 &lt; 大二 &lt; 大三 &lt; **大五** &lt; 大四 
* 若有 $$n=1000$$ 個專題學生 $$Beta, Gamma, ..., Sigma$$等都跟 ``$$Alpha$$做一樣的抽樣調查。 我們需要 **Ctrl + V** 一千次嗎? 

`一年級 <- sample(data1$academic,49)` \#重抽49位1年級學生成績 

`二年級 <- sample(data2$academic,49)` \#重抽49位2年級學生成績 

`三年級 <- sample(data3$academic,49)` \#同理類推 

`四年級 <- sample(data4$academic,49)` \#同理類推 

`五年級 <- sample(data5$academic,49)` \#同理類推 

`sample <- cbind(一年級,二年級,三年級,四年級,五年級)` \#將抽樣結果合併 

`summary(sample)` \# 檢視此次抽樣結果 

 

{% hint style="warning" %}
This page is under construction, will be ready soon! 頁面建置中，我們很快就會完成。👷 🏗 🏃 🌉 🚀
{% endhint %}



